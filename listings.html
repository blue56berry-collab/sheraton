<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sheraton Clone — Listings</title>
<style>
  :root{--accent:#0f6ef0;--muted:#6b7280;--bg:#f5f7fb;--card:#fff;--radius:12px;}
  *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;}
  body{margin:0;background:var(--bg);color:#0b1220}
  .top{background:#fff;padding:18px;box-shadow:0 6px 18px rgba(12,18,40,0.04)}
  .container{max-width:1200px;margin:20px auto;padding:0 18px}
  .breadcrumbs{color:var(--muted);font-size:13px;margin-bottom:10px}
  .layout{display:grid;grid-template-columns:320px 1fr;gap:18px}
  .panel{background:var(--card);padding:14px;border-radius:var(--radius);box-shadow:0 6px 18px rgba(12,18,40,0.04)}
  .filter-group{margin-bottom:12px}
  .filter-group label{display:block;font-weight:700;margin-bottom:8px}
  .amenities{display:flex;flex-wrap:wrap;gap:8px}
  .amenity{padding:8px 10px;border-radius:999px;background:#f3f6ff;border:1px solid rgba(15,110,240,0.06);font-size:13px}
  .results{display:flex;flex-direction:column;gap:12px}
  .hotel{display:flex;gap:12px;background:var(--card);border-radius:10px;padding:12px;align-items:center;box-shadow:0 6px 20px rgba(12,18,40,0.04)}
  .hotel img{width:180px;height:120px;object-fit:cover;border-radius:8px}
  .hotel-info{flex:1}
  .hotel h4{margin:0 0 6px 0}
  .hotel .meta{color:var(--muted);font-size:13px}
  .hotel .cta{display:flex;gap:8px;align-items:center}
  .btn{padding:10px 12px;border-radius:10px;border:1px solid #e6eefb;background:transparent;cursor:pointer}
  .btn-primary{background:linear-gradient(90deg,var(--accent),#7b5afc);color:#fff;border:none}
  .sort{display:flex;gap:10px;align-items:center;justify-content:flex-end;margin-bottom:8px}
  .empty{padding:28px;background:#fff;border-radius:12px;text-align:center;color:var(--muted)}
  @media (max-width:980px){.layout{grid-template-columns:1fr} .hotel img{width:120px;height:80px}}
</style>
</head>
<body>
<div class="top">
  <div class="container" style="display:flex;justify-content:space-between;align-items:center">
    <div style="font-weight:800">Sheraton Clone — Stays</div>
    <div><a href="index.html" style="text-decoration:none;color:var(--accent)">Change Search</a></div>
  </div>
</div>

<main class="container">
  <div class="breadcrumbs" id="searchSummary">Showing results</div>

  <div class="layout">
    <aside>
      <div class="panel">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <div style="font-weight:800">Filters</div>
          <div style="color:var(--muted);font-size:13px">Refine</div>
        </div>

        <div class="filter-group">
          <label>Price Range (USD)</label>
          <input type="range" id="priceRange" min="40" max="400" value="400" />
          <div style="font-size:13px;color:var(--muted)">Max: $<span id="priceVal">400</span></div>
        </div>

        <div class="filter-group">
          <label>Rating</label>
          <select id="ratingFilter" style="padding:10px;border-radius:8px;width:100%;border:1px solid #e8eefb">
            <option value="0">Any rating</option>
            <option value="4.5">4.5+</option>
            <option value="4.0">4.0+</option>
            <option value="3.5">3.5+</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Amenities</label>
          <div class="amenities">
            <div><input type="checkbox" id="wifi" /> <span class="amenity">Wifi</span></div>
            <div><input type="checkbox" id="pool" /> <span class="amenity">Pool</span></div>
            <div><input type="checkbox" id="breakfast" /> <span class="amenity">Breakfast</span></div>
            <div><input type="checkbox" id="gym" /> <span class="amenity">Gym</span></div>
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:12px">
          <button class="btn" id="resetFilters">Reset</button>
          <button class="btn btn-primary" id="applyFilters">Apply</button>
        </div>
      </div>
    </aside>

    <section>
      <div class="sort">
        <div style="color:var(--muted);font-size:13px">Sort</div>
        <select id="sortBy" style="padding:8px;border-radius:8px;border:1px solid #e8eefb">
          <option value="recommended">Recommended</option>
          <option value="price-asc">Price: Low → High</option>
          <option value="price-desc">Price: High → Low</option>
          <option value="rating-desc">Rating</option>
        </select>
      </div>

      <div id="results" class="results"></div>
      <div id="empty" class="empty" style="display:none">No stays found — try changing filter or search.</div>
    </section>
  </div>
</main>

<script>
  // Demo hotel database (could expand)
  const HOTELS = [
    {id:'h1', name:'Oceanview Sheraton', city:'Karachi', price:180, rating:4.9, img:'https://images.unsplash.com/photo-1501117716987-c8e3b6b2d2f1?q=80&w=1200&auto=format&fit=crop', amenities:['wifi','pool','breakfast']},
    {id:'h2', name:'City Center Grand', city:'Karachi', price:95, rating:4.7, img:'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=1200&auto=format&fit=crop', amenities:['wifi','gym','breakfast']},
    {id:'h3', name:'Mountain Retreat', city:'Gilgit', price:140, rating:4.8, img:'https://images.unsplash.com/photo-1553389053-7e4d7c8d5d10?q=80&w=1200&auto=format&fit=crop', amenities:['breakfast']},
    {id:'h4', name:'Seoul Luxury Suites', city:'Seoul', price:220, rating:4.9, img:'https://images.unsplash.com/photo-1542317854-6f2fcc2c36f6?q=80&w=1200&auto=format&fit=crop', amenities:['wifi','gym','pool']},
    {id:'h5', name:'Riverside Inn', city:'Lahore', price:70, rating:4.2, img:'https://images.unsplash.com/photo-1507679799987-c73779587ccf?q=80&w=1200&auto=format&fit=crop', amenities:['wifi']},
    {id:'h6', name:'Skyline Business', city:'Singapore', price:250, rating:4.6, img:'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=1200&auto=format&fit=crop', amenities:['wifi','gym','breakfast']},
  ];

  // read query params
  function qp(name){
    const u = new URLSearchParams(window.location.search);
    return u.get(name);
  }
  const cityRaw = qp('city') || 'any';
  const checkin = qp('checkin') || '';
  const checkout = qp('checkout') || '';

  document.getElementById('searchSummary').innerText =
    `Results for "${decodeURIComponent(cityRaw)}" ${checkin && checkout ? ` · ${checkin} → ${checkout}` : ''}`;

  // render
  const resultsEl = document.getElementById('results');
  const emptyEl = document.getElementById('empty');

  // filter state
  const state = {
    maxPrice: 400,
    ratingMin: 0,
    amenities: {wifi:false,pool:false,breakfast:false,gym:false},
    sort:'recommended'
  };

  document.getElementById('priceRange').addEventListener('input', (e)=>{
    state.maxPrice = Number(e.target.value);
    document.getElementById('priceVal').innerText = state.maxPrice;
  });

  document.getElementById('ratingFilter').addEventListener('change', (e)=>{
    state.ratingMin = Number(e.target.value);
  });

  ['wifi','pool','breakfast','gym'].forEach(a=>{
    document.getElementById(a).addEventListener('change', (e)=>{
      state.amenities[a]= e.target.checked;
    });
  });

  document.getElementById('applyFilters').addEventListener('click', render);
  document.getElementById('resetFilters').addEventListener('click', ()=>{
    state.maxPrice = 400; state.ratingMin=0; state.amenities={wifi:false,pool:false,breakfast:false,gym:false};
    document.getElementById('priceRange').value = 400;
    document.getElementById('priceVal').innerText = 400;
    document.getElementById('ratingFilter').value = '0';
    ['wifi','pool','breakfast','gym'].forEach(a=>document.getElementById(a).checked=false);
    render();
  });

  document.getElementById('sortBy').addEventListener('change', (e)=>{
    state.sort = e.target.value;
    render();
  });

  function matchesAmenities(hotel){
    const keys = Object.keys(state.amenities);
    for(const k of keys){
      if(state.amenities[k] && hotel.amenities.indexOf(k) === -1) return false;
    }
    return true;
  }

  function render(){
    const city = decodeURIComponent(cityRaw).toLowerCase();
    let list = HOTELS.filter(h=>{
      const sameCity = (city==='any' || city==='' ) ? true : h.city.toLowerCase().includes(city) || h.name.toLowerCase().includes(city);
      return sameCity && h.price <= state.maxPrice && h.rating >= state.ratingMin && matchesAmenities(h);
    });

    // sort
    if(state.sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
    else if(state.sort === 'price-desc') list.sort((a,b)=>b.price-a.price);
    else if(state.sort === 'rating-desc') list.sort((a,b)=>b.rating-b.rating);
    else list.sort((a,b)=> b.rating - a.rating); // recommended fallback

    resultsEl.innerHTML = '';
    if(list.length === 0){
      emptyEl.style.display = 'block';
      return;
    } else emptyEl.style.display = 'none';

    for(const h of list){
      const div = document.createElement('div');
      div.className = 'hotel';
      div.innerHTML = `
        <img src="${h.img}" alt="${h.name}">
        <div class="hotel-info">
          <h4>${h.name} <span style="color:var(--muted);font-weight:600;font-size:13px">· ${h.city}</span></h4>
          <div class="meta">${h.amenities.join(' · ')} · <span style="color:#f59e0b">★ ${h.rating}</span></div>
          <div style="margin-top:8px;display:flex;align-items:center;gap:12px">
            <div style="font-weight:800;font-size:18px">$${h.price}<span style="color:var(--muted);font-size:13px"> /night</span></div>
            <div class="cta" style="margin-left:auto">
              <button class="btn" onclick="viewDetails('${h.id}')">View</button>
              <button class="btn btn-primary" onclick="bookNow('${h.id}')">Book</button>
            </div>
          </div>
        </div>
      `;
      resultsEl.appendChild(div);
    }
  }

  // actions
  function viewDetails(id){
    const q = `id=${encodeURIComponent(id)}&checkin=${encodeURIComponent(checkin)}&checkout=${encodeURIComponent(checkout)}`;
    window.location.href = `hotel.html?${q}`;
  }

  function bookNow(id){
    // go to hotel detail page where booking form exists
    viewDetails(id);
    // once there user can fill booking form
  }

  // initialize view values
  document.getElementById('priceVal').innerText = state.maxPrice;
  render();
</script>
</body>
</html>
